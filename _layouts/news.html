---
# Copyright 2023 seL4 Project a Series of LF Projects, LLC.
# SPDX-License-Identifier: CC-BY-SA-4.0
layout: base
---

{%- assign this_year = page.year | append: "" -%}
{% capture sub %}
<p>
News about seL4, the seL4 Foundation, and the seL4 ecosystem.
</p>
<nav class="mt-4">
  {%- assign newest_url = site.pages | where: "layout", "news" | map: "name" | sort | pop | last -%}
  {%- assign newest_year = newest_url | split: "." | first -%}
  {%- assign url = "/news/" | relative_url %}
      News from {%- if newest_year == this_year %} older {%- else %} other {%- endif %} years:
  {%- for i in (2020..newest_year) -%}
  {%-   unless i == page.year %}
        <a href="{{ url }}{{ i }}.html">{{ i }}</a>
  {%- else %}
       <span class="text-lighter">{{ i }}</span>
  {%- endunless -%}
  {%- endfor %}
</nav>
{% endcapture %}

{% include heading.html
   h1=page.title
   sub=sub
%}

{%  for news_item in site.news-items reversed -%}
{%-   assign date = news_item.date | date: "%d %b %Y" -%}
{%-   assign iso = news_item.date | date: "%Y-%m-%d" -%}
{%-   assign year = date | date: "%Y" -%}
{%-   assign default_anchor = news_item.date | date: "%m-%d" -%}
{%-   assign anchor = news_item.anchor | default: default_anchor -%}
{%-   if year == this_year -%}

{% comment %}
FIXME: news_item..width is currently being ignored, because tailwind needs to see
       the value in the source for the grid to work. Need to either not use
       grid or figure out some other way to set the width. Or provide only
       a finite set of choices (narrow, standard, wide).
{% endcomment %}
{%- if news_item.img -%}
{%-   assign w = "lg:grid-cols-[auto_30%]" -%}
{%- else -%}
{%-   assign w = "lg:grid-cols-[auto_0%]" -%}
{%- endif -%}

<article class="max-w-4xl mx-auto mb-12 sm:mb-18 pt-2 pb-8 px-6 lg:px-8 clear-both">
<a href="#{{anchor}}" class="text-base sm:text-lg hover:underline text-gray-400 pt-16 lg:pt-20"><time datetime="{{ iso }}" id="{{anchor}}">{{ date }}</time></a>
<h2 class="mb-8 mt-2 h2-size">{{ news_item.title }}</h2>
<div class="theprose prose-ul:[ul]:my-2 prose-p:[p]:my-3 prose-li:[li]:my-1.5 max-w-4xl">
  {%    if news_item.img -%}
  {%-     if news_item.link -%}
    <a href="{{ news_item.link }}">
  {%-     endif -%}
      <img src="{{ news_item.img | relative_url }}"
           alt="{{ news_item.alt | default: news_item.title }}"
           class="float-right rounded-xl -mt-1 pt-6 sm:pt-8 px-6 sm:px-8 pb-6 sm:pb-8 ml-4 sm:ml-6 bg-white w-2/5 lg:-mr-16" >
  {%-     if news_item.link -%}
    </a>
  {%-     endif -%}
  {%-   endif %}
  {{ news_item.content }}
</div>
</article>

{%   endif -%}
{%- endfor -%}
